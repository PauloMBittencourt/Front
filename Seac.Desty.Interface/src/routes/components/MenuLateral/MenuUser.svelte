<script>
	import { goto } from '$app/navigation';

	import { session } from '$app/stores';

	import { Popover, PopoverButton, PopoverPanel, Transition } from '@rgossiaux/svelte-headlessui';

	import { createPopperActions } from 'svelte-popperjs';

	const [popperRef, popperContent] = createPopperActions();
	const popperOptions = {
		placement: 'right-end',
		modifiers: [{ name: 'offset', options: { offset: [0, -5] } }]
	};
</script>

<Popover style="position: relative;">
	<PopoverButton
		use={[popperRef]}
		class="group text-lg text-vermelho-desty font-semibold pl-2 pr-2  inline-flex items-start "
	>
		<svg
			class="mx-auto hover:bg-cinza-desty-050 rounded-full p-2"
			width="42"
			height="42"
			viewBox="0 0 32 32"
			fill="none"
			xmlns="http://www.w3.org/2000/svg"
		>
			<path
				d="M16 8C15.0111 8 14.0444 8.29325 13.2222 8.84265C12.3999 9.39206 11.759 10.173 11.3806 11.0866C11.0022 12.0002 10.9031 13.0055 11.0961 13.9755C11.289 14.9454 11.7652 15.8363 12.4645 16.5355C13.1637 17.2348 14.0546 17.711 15.0246 17.9039C15.9945 18.0969 16.9998 17.9978 17.9134 17.6194C18.8271 17.241 19.6079 16.6001 20.1574 15.7779C20.7068 14.9556 21 13.9889 21 13C21 11.6739 20.4732 10.4021 19.5355 9.46447C18.5979 8.52678 17.3261 8 16 8ZM16 16C15.4067 16 14.8266 15.8241 14.3333 15.4944C13.8399 15.1648 13.4554 14.6962 13.2284 14.1481C13.0013 13.5999 12.9419 12.9967 13.0576 12.4147C13.1734 11.8328 13.4591 11.2982 13.8787 10.8787C14.2982 10.4591 14.8328 10.1734 15.4147 10.0576C15.9967 9.94189 16.5999 10.0013 17.1481 10.2284C17.6962 10.4554 18.1648 10.8399 18.4944 11.3333C18.8241 11.8266 19 12.4067 19 13C18.9992 13.7954 18.6829 14.558 18.1204 15.1204C17.558 15.6829 16.7954 15.9992 16 16Z"
				fill="#0B08B7"
			/>
			<path
				d="M16 2C13.2311 2 10.5243 2.82109 8.22202 4.35943C5.91973 5.89777 4.12532 8.08427 3.06569 10.6424C2.00607 13.2006 1.72882 16.0155 2.26901 18.7313C2.80921 21.447 4.14258 23.9416 6.10051 25.8995C8.05845 27.8574 10.553 29.1908 13.2687 29.731C15.9845 30.2712 18.7994 29.9939 21.3576 28.9343C23.9157 27.8747 26.1022 26.0803 27.6406 23.778C29.1789 21.4757 30 18.7689 30 16C29.9958 12.2883 28.5194 8.72977 25.8948 6.10518C23.2702 3.48059 19.7117 2.00423 16 2V2ZM10 26.377V25C10.0008 24.2046 10.3171 23.442 10.8796 22.8796C11.442 22.3171 12.2046 22.0008 13 22H19C19.7954 22.0008 20.558 22.3171 21.1204 22.8796C21.6829 23.442 21.9992 24.2046 22 25V26.377C20.1792 27.4402 18.1085 28.0005 16 28.0005C13.8915 28.0005 11.8208 27.4402 10 26.377V26.377ZM23.992 24.926C23.9721 23.6143 23.4377 22.363 22.5039 21.4416C21.5702 20.5202 20.3118 20.0025 19 20H13C11.6882 20.0025 10.4298 20.5202 9.4961 21.4416C8.56235 22.363 8.02794 23.6143 8.00801 24.926C6.19457 23.3067 4.91574 21.1749 4.34084 18.8127C3.76594 16.4505 3.92211 13.9693 4.78864 11.6979C5.65518 9.42637 7.19123 7.47167 9.19338 6.09257C11.1955 4.71347 13.5693 3.97503 16.0005 3.97503C18.4317 3.97503 20.8055 4.71347 22.8076 6.09257C24.8098 7.47167 26.3458 9.42637 27.2124 11.6979C28.0789 13.9693 28.2351 16.4505 27.6602 18.8127C27.0853 21.1749 25.8064 23.3067 23.993 24.926H23.992Z"
				fill="#0B08B7"
			/>
		</svg>
	</PopoverButton>

	<PopoverPanel use={[[popperContent, popperOptions]]} style="position: absolute; z-index: 10;">
		<div class="text-azul-desty border bg-white rounded-lg p-1 text-sm font-semibold w-max">
			<ul class="flex flex-col">
				<li class="p-2 inline-flex items-center hover:bg-cinza-desty-050 hover:rounded-lg w-full">
					<svg
						class="mr-2"
						width="18"
						height="18"
						viewBox="0 0 32 32"
						fill="none"
						xmlns="http://www.w3.org/2000/svg"
					>
						<path
							d="M20 14.6667H29.3333V17.3333H20V14.6667ZM21.3333 20H29.3333V22.6667H21.3333V20ZM18.6667 9.33334H29.3333V12H18.6667V9.33334ZM5.33333 25.3333H18.6667V24C18.6667 20.324 15.676 17.3333 12 17.3333H9.33333C5.65733 17.3333 2.66667 20.324 2.66667 24V25.3333H5.33333ZM10.6667 16C13.3267 16 15.3333 13.9933 15.3333 11.3333C15.3333 8.67334 13.3267 6.66667 10.6667 6.66667C8.00667 6.66667 6 8.67334 6 11.3333C6 13.9933 8.00667 16 10.6667 16Z"
							fill="#0B08B7"
						/>
					</svg>

					Meus dados
				</li>
				<li class="p-2 inline-flex items-center hover:bg-cinza-desty-050 hover:rounded-lg w-full">
					<svg
						class="mr-2"
						width="18"
						height="18"
						viewBox="0 0 32 32"
						fill="none"
						xmlns="http://www.w3.org/2000/svg"
					>
						<path
							d="M20 11V8.5C20 7.83696 19.7366 7.20107 19.2678 6.73223C18.7989 6.26339 18.163 6 17.5 6H5.5C4.83696 6 4.20107 6.26339 3.73223 6.73223C3.26339 7.20107 3 7.83696 3 8.5V23.5C3 24.163 3.26339 24.7989 3.73223 25.2678C4.20107 25.7366 4.83696 26 5.5 26H17.5C18.163 26 18.7989 25.7366 19.2678 25.2678C19.7366 24.7989 20 24.163 20 23.5V21M24 11L29 16L24 21M11.9375 16H29"
							stroke="#0B08B7"
							stroke-width="2"
							stroke-linecap="round"
							stroke-linejoin="round"
						/>
					</svg>
					<a href="/login">Sair</a>
				</li>
			</ul>
		</div>
	</PopoverPanel>
</Popover>
